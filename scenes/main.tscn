[gd_scene load_steps=14 format=3 uid="uid://d4jsgbnefaos0"]

[ext_resource type="Texture2D" uid="uid://b1gjjsif3emk2" path="res://textures/table.png" id="1_ny0oj"]
[ext_resource type="PackedScene" uid="uid://bfvp6uoec3dxw" path="res://scenes/hand.tscn" id="1_wtpr2"]
[ext_resource type="PackedScene" uid="uid://c8747s5dmbype" path="res://scenes/deck.tscn" id="3_77w5e"]
[ext_resource type="PackedScene" uid="uid://dpr1gbf1acv8h" path="res://scenes/pile.tscn" id="4_2ulhs"]
[ext_resource type="Script" path="res://scripts/draw_button.gd" id="4_g8p6j"]
[ext_resource type="Script" path="res://scripts/throw-button.gd" id="7_081wq"]
[ext_resource type="Script" path="res://scripts/manager.gd" id="7_mp5rb"]
[ext_resource type="Script" path="res://scripts/pile_button.gd" id="7_wmo5i"]
[ext_resource type="StyleBox" path="res://fonts/basic_panel_container_styleboxflat.tres" id="7_wnw8v"]
[ext_resource type="Theme" path="res://fonts/basic_text_theme.tres" id="8_jyhes"]
[ext_resource type="PackedScene" uid="uid://ce8amhnue1moi" path="res://scenes/win_pile.tscn" id="8_xmb16"]
[ext_resource type="PackedScene" uid="uid://ck6qk0ej0g33d" path="res://scenes/opponent_hand.tscn" id="9_bf6rh"]

[sub_resource type="GDScript" id="GDScript_nvd1v"]
script/source = "extends Button

func _on_pressed() -> void:
	pass # Replace with function body.
"

[node name="Root" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]

[node name="PlayerHand" parent="." instance=ExtResource("1_wtpr2")]
position = Vector2(-95, 242)
scale = Vector2(0.608543, 0.608543)
counts = Array[int]([7, 1, 1, 1, 4, 0, 3, 1])

[node name="PlayerDeck" parent="." instance=ExtResource("3_77w5e")]
z_index = -1
position = Vector2(-490, 595)
scale = Vector2(0.8, 0.8)
cards = Array[int]([1, 2, 3, 4])

[node name="OpponentDeck" parent="." instance=ExtResource("3_77w5e")]
z_index = -1
position = Vector2(490, 595)
scale = Vector2(0.8, 0.8)
cards = Array[int]([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])

[node name="Pile" parent="." instance=ExtResource("4_2ulhs")]
position = Vector2(0, 102)

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DrawButton" type="Button" parent="UI" node_paths=PackedStringArray("deck", "hand")]
layout_mode = 0
offset_left = -562.0
offset_top = -317.0
offset_right = -514.0
offset_bottom = -286.0
scale = Vector2(2.1503, 1.89191)
text = "draw"
script = ExtResource("4_g8p6j")
deck = NodePath("../../PlayerDeck")
hand = NodePath("../../PlayerHand")

[node name="ThrowButton" type="Button" parent="UI" node_paths=PackedStringArray("pile")]
layout_mode = 0
offset_left = -452.0
offset_top = -317.0
offset_right = -397.0
offset_bottom = -286.0
scale = Vector2(1.97163, 1.86243)
text = "throw"
script = ExtResource("7_081wq")
pile = NodePath("../../Pile")

[node name="PileButton" type="Button" parent="UI" node_paths=PackedStringArray("win_pile")]
layout_mode = 0
offset_left = -337.0
offset_top = -315.0
offset_right = -300.0
offset_bottom = -284.0
scale = Vector2(2.49395, 1.79292)
text = "pile"
script = ExtResource("7_wmo5i")
win_pile = NodePath("../../WinPile")

[node name="PanelContainer" type="PanelContainer" parent="UI"]
layout_mode = 0
offset_left = -500.0
offset_top = -200.0
offset_right = -457.0
offset_bottom = -160.0
theme_override_styles/panel = ExtResource("7_wnw8v")

[node name="PassButton" type="Button" parent="UI/PanelContainer"]
layout_mode = 2
theme = ExtResource("8_jyhes")
theme_override_colors/icon_hover_pressed_color = Color(0, 0, 0, 1)
text = "PASS"

[node name="ResetButton" type="Button" parent="UI"]
layout_mode = 0
offset_left = -448.0
offset_top = -249.0
offset_right = -400.0
offset_bottom = -218.0
scale = Vector2(2.02161, 2.15109)
text = "reset"
script = SubResource("GDScript_nvd1v")

[node name="Manager" type="Node2D" parent="." node_paths=PackedStringArray("player_hand", "opponent_hand", "player_deck", "opponent_deck", "pile", "win_pile")]
z_index = -2
script = ExtResource("7_mp5rb")
player_hand = NodePath("../PlayerHand")
opponent_hand = NodePath("../OpponentHand")
player_deck = NodePath("../PlayerDeck")
opponent_deck = NodePath("../OpponentDeck")
pile = NodePath("../Pile")
win_pile = NodePath("../WinPile")

[node name="Timer" type="Timer" parent="Manager"]
one_shot = true

[node name="WinHandTimer" type="Timer" parent="Manager"]
one_shot = true

[node name="WinPile" parent="." instance=ExtResource("8_xmb16")]
z_index = -2
position = Vector2(0, -305)
scale = Vector2(0.5, 0.5)

[node name="OpponentHand" parent="." instance=ExtResource("9_bf6rh")]
position = Vector2(335, 225)
scale = Vector2(0.759838, 0.759838)
counts = Array[int]([1, 1, 1, 1, 1, 1, 0, 0])

[node name="Table" type="Sprite2D" parent="."]
z_index = -20
scale = Vector2(0.2, 0.2)
texture = ExtResource("1_ny0oj")

[connection signal="set_played" from="PlayerHand" to="Manager" method="_on_player_hand_set_played"]
[connection signal="pressed" from="UI/DrawButton" to="UI/DrawButton" method="_button_pressed"]
[connection signal="pressed" from="UI/ThrowButton" to="UI/ThrowButton" method="_on_pressed"]
[connection signal="pressed" from="UI/PileButton" to="UI/PileButton" method="_on_pressed"]
[connection signal="pressed" from="UI/PanelContainer/PassButton" to="Manager" method="_on_player_pass"]
[connection signal="pressed" from="UI/ResetButton" to="Manager" method="_on_reset_button_pressed"]
[connection signal="timeout" from="Manager/Timer" to="Manager" method="_on_opponent_timer_timeout"]
[connection signal="timeout" from="Manager/WinHandTimer" to="Manager" method="_on_win_hand_timer_timeout"]
